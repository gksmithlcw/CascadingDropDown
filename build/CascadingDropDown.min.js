// Generated by CoffeeScript 1.3.1
/*
CascadingDropDown jQuery plugin. https://github.com/shawnmclean/CascadingDropDown
Copyright (c) 2012 Shawn Mclean and CascadingDropDown.js contributors
*/
(function(){(function(a){return a.fn.CascadingDropDown=function(b,c,d){var e,f;if(!b)throw"A source element is required";if(!c)throw"An action path is requried";return f=a.extend({promptText:"-- Select --",loadingText:"Loading ..",errorText:"Error loading data.",postData:null,onLoading:null,onLoaded:null,onError:null},d),e="<option></option>",this.each(function(){var d,g,h,i,j,k,l;return d=a(this),a(b).on("change",function(){var b;return b=a(this),b.val()!==""?j():l()}),h=function(){d.children().size()===0&&l();if(a(b).val())return j()},g=function(){return d.empty(),d.attr("disabled","disabled")},l=function(){return g(),d.append(a(e).attr("value","").text(f.promptText))},i=function(){return d.removeAttr("disabled")},k=function(){return g(),d.append(a(e).attr("value","").text(f.errorText)),a.isFunction(f.onError)&&f.onError.call(d)},j=function(){return a.isFunction(f.onLoading)&&f.onLoading.call(d),a.ajax({url:c,type:"POST",dataType:"json",data:f.postData||a(b).serialize(),success:function(b){return l(),a.each(b,function(){return d.append(a(f.optionTag).attr("value",this.Value).text(this.Text))}),i(),a.isFunction(f.onLoaded)&&f.onLoaded.call(d)},error:function(){return k()}})},i=function(){return d.removeAttr("disabled")},h()})}})(jQuery)}).call(this);
